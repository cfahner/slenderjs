"function"!=typeof Object.create&&(Object.create=function(){var c=function(){};return function(e){if("object"!=typeof e)throw TypeError("prototype must be an object");c.prototype=e;e=new c;c.prototype=null;return e}}());"object"!==typeof window.console&&(window.console={log:function(c){}});(function(){for(var c="article aside header main footer section nav details summary".split(" "),e=0;e<c.length;e+=1)document.createElement(c[e])})();
"function"!==typeof String.prototype.endsWith&&(String.prototype.endsWith=function(c){return-1!==this.indexOf(c,this.length-c.length)});String.prototype.startsWith||(String.prototype.startsWith=function(c,e){e=e||0;return this.indexOf(c,e)===e});
(function(){var c=0;window.requestAnimationFrame||(window.requestAnimationFrame=function(e,b){var f=(new Date).getTime(),d=Math.max(0,16-(f-c));c=f+d;return window.setTimeout(function(){e(f+d)},d)});window.cancelAnimationFrame||(window.cancelAnimationFrame=clearTimeout)})();
(function(c){c=!!("open"in window.document.createElement("details"));var e="[object Opera]"==Object.prototype.toString.call(window.opera),b=function(b){if(!b.data("sl-summaryinit")){var d=b.closest("details");d.contents().filter(function(){return 3==this.nodeType&&/[^ \t\n\f\r]/.test(this.data)}).wrap("<span>");var c=d.children(":not(summary)");d.prop("open","string"===typeof d.attr("open"));d.prop("open")?c.show():c.hide();b.attr("role","button").prop("tabIndex",0).click(function(){d.prop("open")?
(d.prop("open",!1).removeAttr("open"),c.hide()):(d.prop("open",!0).attr("open",""),c.show())}).keyup(function(d){if(32==d.keyCode||13==d.keyCode&&!e)d.preventDefault(),b.click()});b.data("sl-summaryinit",!0)}};$("html").addClass(c?"sl-support-details":"sl-support-nodetails");c||($(document).on("slinitdetailssummary","details summary",function(){$(this).data("sl-summaryinit")||b($(this))}),$(function(){$("details summary").trigger("slinitdetailssummary")}))})(window);
(function(c,e){var b=c.jQuery,f=c.document;c.Slender={version:"0.2.1"};var d=c.Slender;b(function(){b(".sl-nojs").hide();b(f).on("animationstart MSAnimationStart webkitAnimationStart oAnimationStart",".sl-nojs",function(a){"slNodeInserted"===a.originalEvent.animationName&&b(this).hide()});if(c.location.hash.startsWith("#sl-scroll-")){var a=c.location.hash.substr(11);b.isNumeric(a)&&b(c).scrollTop(a)}});var h={};d.subscribe=function(a,b,d){a in h||(h[a]=[]);h[a].push({subber:b,func:d})};d.unsubscribe=
function(a,k){a in h&&h[a].length&&(h[a]=b.map(h[a],function(a){return a.func===k?e:a}))};d.publish=function(a,k,d){var c=[];b.each(h[a]||[],function(e,f){b.isFunction(f.func)&&c.push(f.func.apply(f.subber,[d||{},k,a]))});return c};var g={},p=1,l={};try{Object.defineProperty(d,"viewConstructors",{get:function(){return g}}),Object.defineProperty(d,"viewInstances",{get:function(){return l}})}catch(B){d.viewConstructors=g,d.viewInstances=l}d.View=function(){};d.View.prototype.enhance=function(a,b){this.viewId=
a;this.element=b;this.onEnhance&&this.onEnhance()};d.View.prototype.restore=function(){this.onRestore&&this.onRestore();delete this.viewId;delete this.element};d.InlineView=function(a){if("object"!==typeof a)throw TypeError("InlineView requires object blueprint");for(var b in a)this[b]=a[b];d.View.call(this)};d.InlineView.prototype=Object.create(d.View.prototype);d.InlineView.prototype.constructor=d.InlineView;d.defineView=function(a,b){if("object"==typeof b){var c=function(){d.InlineView.call(this,
b)};c.prototype=Object.create(d.InlineView.prototype);c.prototype.constructor=c;g[a]=c}else"function"==typeof b&&(g[a]=b)};d.enhanceViews=function(a){b(a).find("[data-view]").each(function(){if(!b(this).data("SlenderViewId")){var a=b(this).attr("data-view");if(g[a]){var c=new g[a];c instanceof d.View?(a=p,p+=1,l[a]=c,b(this).data("SlenderViewId",a),c.enhance(a,b(this))):(console.log("Not a view, ",a,", ",c),console.trace&&console.trace())}else console.log("No constructor for view, ",a),console.trace&&
console.trace()}})};d.restoreViews=function(a){b(a).find("[data-view]").each(function(){var a=b(this).data("SlenderViewId");a&&(l[a].restore(),delete l[a],b(this).removeData("SlenderViewId"))})};d.TestView=function(){};d.TestView.prototype=Object.create(d.View.prototype);d.TestView.prototype.constructor=d.TestView;d.TestView.prototype.onEnhance=function(){this.element.text("Enhanced "+this.viewId)};d.TestView.prototype.onRestore=function(){this.element.text("Restored "+this.viewId)};d.defineView("Slender.TestView",
d.TestView);d.defineView("Slender.TestInlineView",{onEnhance:function(){this.element.text("Enhanced "+this.viewId)},onRestore:function(){this.element.text("Restored "+this.viewId)}});b(function(){d.enhanceViews(b("body"))});b(f).on("keyup focus","textarea.sl-input",function(){clearTimeout(b(this).data("shrinkTimeout"));var a=b(this),k=b(c).scrollTop();a.css({height:0,"min-height":0,"max-height":0});var d=a[0].scrollHeight+parseFloat(a.css("border-top-width"))+parseFloat(a.css("border-bottom-width"));
0===a[0].clientHeight&&(d+=parseFloat(a.css("padding-top"))+parseFloat(a.css("padding-bottom")));a.css({height:d+15,"min-height":"","max-height":""});b(c).scrollTop(k)});b(f).on("blur","textarea.sl-input",function(){var a=this;b(this).data("shrinkTimeout",setTimeout(function(){b(a).css({height:"","min-height":"","max-height":""})},500))});var x=b("<span class='sl-flat sl-switch-enh'>").append(b("<span class=sl-switch-flip>"),b("<span class=sl-switch-space>"),b("<span class=sl-switch-text>")),q=function(a,
b){var d=a.val(),c=b.data("valueOn"),e=b.data("valueOff"),f=e,h=b.data("labelOff"),g=b.find(".sl-switch-flip").removeClass("sl-switch-flip-on");d===e&&(f=c,h=b.data("labelOn"),g.addClass("sl-switch-flip-on"));a.val(f);b.find(".sl-switch-text").text(h)},y=function(a){var d=x.clone().addClass(a.attr("class"));a.after(d).hide();var c=a.find(".sl-switch-on");0>=c.length&&(c=b(a.find("option")[0]));0>=c.length&&(c=b("<option value=1>").text("\u00e2\u0153\u201c"));var e=a.find(".sl-switch-off");0>=e.length&&
(e=b(a.find("option")[1]));0>=e.length&&(e=b("<option value=0>").text("\u00c3\u2014"));d.data({valueOn:c.val(),valueOff:e.val(),labelOn:c.text(),labelOff:e.text()}).click(function(){a.is(":enabled")&&q(a,d)});for(c=0;2>c;c+=1)q(a,d)};b(function(){b(f).on("animationstart MSAnimationStart webkitAnimationStart oAnimationStart",".sl-switch",function(a){"slNodeInserted"===a.originalEvent.animationName&&y(b(a.target))})});var z=b('<div class="sl-tmid sl-block-styled">').append(b('<span class="sl-ind sl-ind-load">')),
A=b('<div class="sl-tmid sl-block-styled">').append(b('<span class="sl-ind sl-ind-error">')),n,r=function(a){"object"!==typeof a&&(a={});m();location.href.endsWith("#sl-pop")||(location.hash="#sl-pop");var c=b("<div>").append(z);a.styled&&c.addClass("sl-popstyled");b.ajax(a.contentUrl,{type:a.method||"GET",cache:!!a.cache,success:function(a){c.html(a);c.find("details summary").trigger("slinitdetailssummary");d.enhanceViews(c)},error:function(){c.html(A)}});b("body").append(b("<div class=sl-popbg>"),
b("<div class=sl-popwrap>").append(b("<div class=sl-popcontain>").append(b("<div class=sl-pop tabindex=0>").html(c)).click(function(a){a.target===this&&m()})));setTimeout(function(){c.parent().focus()},0)},m=function(){location.href.endsWith("#sl-pop")&&(location.hash="_");var a=b("body").find(".sl-popwrap, .sl-popbg");d.restoreViews(a);a.remove();n&&n.focus()},t=/^([0-9]*(\.[0-9]+)?){1}(em|px)?$/,u=function(a){var d={};if(a.is("form")){var e=a.serializeArray(),f;for(f in e)d[e[f].name]=d[e[f].value]}e=
a.attr("data-pophref")||a.attr("href")||a.attr("action")||"";f=a.attr("data-popmethod")||a.attr("method")||"GET";var h="true"===a.attr("data-styled")||"true"===a.attr("data-popstyled");a:{a=a.attr("data-screen-width");if(t.test(a)||"medium"===a||"large"===a){"medium"===a?a="35em":"large"===a&&(a="65em");var g=t.exec(a);a=parseFloat(g[1]);g=g[3];if("em"===g&&b(c).width()/parseFloat(b("body").css("font-size"))<a||"px"===g&&b(c).width()<a){a=!1;break a}}a=!0}return{contentUrl:e,method:f,data:d,styled:h,
open:a,dummy:0}};b(f).on("click",".sl-popopen:not(form)",function(a){var c=u(b(this));c.open&&(a.preventDefault(),n=b(this),r(c))});b(f).on("submit","form.sl-popopen",function(a){var c=u(b(this));c.open&&(a.preventDefault(),n=b(b(this).find(":submit")[0]),r(c))});b(f).on("click",".sl-popclose",function(a){0<b(this).closest(".sl-pop").length&&(a.preventDefault(),m())});b(f).keydown(function(a){27===a.which&&m()});b(c).on("hashchange",function(a){a.originalEvent.oldURL.endsWith("#sl-pop")&&!a.originalEvent.newURL.endsWith("#sl-pop")&&
m()});b(f).on("focus","input, select, textarea",function(){"string"!==typeof b(this).data("sl-last-confirm")&&b(this).data("sl-last-confirm",b(this).val())});b(f).on("change input paste keyup","input, select, textarea",function(){var a=b(this);clearTimeout(a.data("sl-current-timeout"));a.data("sl-current-timeout",setTimeout(function(){a.val()!=a.data("sl-last-confirm")&&(a.data("sl-last-confirm",a.val()),a.trigger("delaytextchange"))},500))});b.valHooks.text={set:function(a,c){b(a).data("sl-last-confirm",
c)}};var v=function(){b(this).closest("form").submit()};b(f).on("change",".sl-autosubmit",v).on("delaytextchange",".sl-autosubmit-delay",v);var w=function(a){var b=Math.pow(a[0].x-a[1].x,2);a=Math.pow(a[0].y-a[1].y,2);return Math.sqrt(b+a)};b(f).on("wheel mousewheel DOMMouseScroll",".sl-zoomable",function(a){a=a.originalEvent;var c=0>a.detail||0<a.wheelDelta?1:-1;b(this).trigger({type:"slzoom",zoomFactor:0<c?1.02:1/1.02,zoomOriginX:a.pageX,zoomOriginY:a.pageY});a.stopPropagation();a.preventDefault()});
b(f).on("touchstart",".sl-zoomable",function(a){var c=a.originalEvent.touches;c&&2===c.length&&(a.preventDefault(),a=[{x:c[0].pageX,y:c[0].pageY},{x:c[1].pageX,y:c[1].pageY}],b(this).data("sl-zoompinching",!0),b(this).data("sl-zoomdist",w(a)),b(this).data("sl-zoomorig",{x:(a[0].x+a[1].x)/2,y:(a[0].y+a[1].y)/2}))}).on("touchmove",".sl-zoomable",function(a){var c=a.originalEvent.touches;c&&2===c.length&&b(this).data("sl-zoompinching")&&(a.preventDefault(),a.stopPropagation(),a=w([{x:c[0].pageX,y:c[1].pageY},
{x:c[1].pageX,y:c[1].pageY}]),c=b(this).data("sl-zoomdist"),c=a/c,b(this).data("sl-zoomdist",a),.5>c||2<c||b(this).trigger({type:"slzoom",zoomFactor:c,zoomOriginX:b(this).data("sl-zoomorig").x,zoomOriginY:b(this).data("sl-zoomorig").y}))}).on("touchend",".sl-zoomable",function(a){(a=a.originalEvent.touches)&&2>a.length&&b(this).data("sl-zoompinching",!1)})})(window);
